{"version":3,"file":"microbundle.js","sources":["../src/lib/transform-fast-rest.js","../src/utils.js","../src/lib/babel-custom.js","../src/log-error.js","../src/index.js"],"sourcesContent":["/**\n * @type {import('@babel/core')}\n */\n\n/**\n * Transform ...rest parameters to [].slice.call(arguments,offset).\n * Demo: https://astexplorer.net/#/gist/70aaa0306db9a642171ef3e2f35df2e0/576c150f647e4936fa6960e0453a11cdc5d81f21\n * Benchmark: https://jsperf.com/rest-arguments-babel-pr-9152/4\n * @param {object} opts\n * @param {babel.template} opts.template\n * @param {babel.types} opts.types\n * @returns {babel.PluginObj}\n */\nexport default function fastRestTransform({ template, types: t }) {\n\tconst slice = template`var IDENT = Array.prototype.slice;`;\n\n\tconst VISITOR = {\n\t\tRestElement(path, state) {\n\t\t\tif (path.parentKey !== 'params') return;\n\n\t\t\t// Create a global _slice alias\n\t\t\tlet slice = state.get('slice');\n\t\t\tif (!slice) {\n\t\t\t\tslice = path.scope.generateUidIdentifier('slice');\n\t\t\t\tstate.set('slice', slice);\n\t\t\t}\n\n\t\t\t// _slice.call(arguments) or _slice.call(arguments, 1)\n\t\t\tconst args = [t.identifier('arguments')];\n\t\t\tif (path.key) args.push(t.numericLiteral(path.key));\n\t\t\tconst sliced = t.callExpression(\n\t\t\t\tt.memberExpression(t.clone(slice), t.identifier('call')),\n\t\t\t\targs,\n\t\t\t);\n\n\t\t\tconst ident = path.node.argument;\n\t\t\tconst binding = path.scope.getBinding(ident.name);\n\n\t\t\tif (binding.referencePaths.length !== 0) {\n\t\t\t\t// arguments access requires a non-Arrow function:\n\t\t\t\tconst func = path.parentPath;\n\t\t\t\tif (t.isArrowFunctionExpression(func)) {\n\t\t\t\t\tfunc.arrowFunctionToExpression();\n\t\t\t\t}\n\n\t\t\t\tif (binding.constant && binding.referencePaths.length === 1) {\n\t\t\t\t\t// one usage, never assigned - replace usage inline\n\t\t\t\t\tbinding.referencePaths[0].replaceWith(sliced);\n\t\t\t\t} else {\n\t\t\t\t\t// unknown usage, create a binding\n\t\t\t\t\tconst decl = t.variableDeclaration('var', [\n\t\t\t\t\t\tt.variableDeclarator(t.clone(ident), sliced),\n\t\t\t\t\t]);\n\t\t\t\t\tfunc.get('body').unshiftContainer('body', decl);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tpath.remove();\n\t\t},\n\t};\n\n\treturn {\n\t\tname: 'transform-fast-rest',\n\t\tvisitor: {\n\t\t\tProgram(path, state) {\n\t\t\t\tconst childState = new Map();\n\t\t\t\tconst useHelper = state.opts.helper === true; // defaults to false\n\n\t\t\t\tif (!useHelper) {\n\t\t\t\t\tlet inlineHelper;\n\t\t\t\t\tif (state.opts.literal === false) {\n\t\t\t\t\t\tinlineHelper = template.expression.ast`Array.prototype.slice`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinlineHelper = template.expression.ast`[].slice`;\n\t\t\t\t\t}\n\t\t\t\t\tchildState.set('slice', inlineHelper);\n\t\t\t\t}\n\n\t\t\t\tpath.traverse(VISITOR, childState);\n\n\t\t\t\tconst name = childState.get('slice');\n\t\t\t\tif (name && useHelper) {\n\t\t\t\t\tconst helper = slice({ IDENT: name });\n\t\t\t\t\tt.addComment(helper.declarations[0].init, 'leading', '#__PURE__');\n\t\t\t\t\tpath.unshiftContainer('body', helper);\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t};\n}\n","import fs from 'fs';\nimport { promisify } from 'es6-promisify';\n\nexport const readFile = promisify(fs.readFile);\n// export const writeFile = promisify(fs.writeFile);\nexport const stat = promisify(fs.stat);\nexport const isDir = name =>\n\tstat(name)\n\t\t.then(stats => stats.isDirectory())\n\t\t.catch(() => false);\nexport const isFile = name =>\n\tstat(name)\n\t\t.then(stats => stats.isFile())\n\t\t.catch(() => false);\nexport const stdout = console.log.bind(console); // eslint-disable-line no-console\nexport const stderr = console.error.bind(console);\n\nexport const isTruthy = obj => {\n\tif (!obj) {\n\t\treturn false;\n\t}\n\n\treturn obj.constructor !== Object || Object.keys(obj).length > 0;\n};\n","import { createConfigItem } from '@babel/core';\nimport babelPlugin from 'rollup-plugin-babel';\nimport merge from 'lodash.merge';\nimport transformFastRest from './transform-fast-rest';\nimport { isTruthy } from '../utils';\n\nconst ESMODULES_TARGET = {\n\tesmodules: true,\n};\n\nconst mergeConfigItems = (type, ...configItemsToMerge) => {\n\tconst mergedItems = [];\n\n\tconfigItemsToMerge.forEach(configItemToMerge => {\n\t\tconfigItemToMerge.forEach(item => {\n\t\t\tconst itemToMergeWithIndex = mergedItems.findIndex(\n\t\t\t\tmergedItem =>\n\t\t\t\t\t(mergedItem.name || mergedItem.file.resolved) ===\n\t\t\t\t\t(item.name || item.file.resolved),\n\t\t\t);\n\n\t\t\tif (itemToMergeWithIndex === -1) {\n\t\t\t\tmergedItems.push(item);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmergedItems[itemToMergeWithIndex] = createConfigItem(\n\t\t\t\t[\n\t\t\t\t\tmergedItems[itemToMergeWithIndex].file.resolved,\n\t\t\t\t\tmerge(mergedItems[itemToMergeWithIndex].options, item.options),\n\t\t\t\t],\n\t\t\t\t{\n\t\t\t\t\ttype,\n\t\t\t\t},\n\t\t\t);\n\t\t});\n\t});\n\n\treturn mergedItems;\n};\n\nconst createConfigItems = (type, items) => {\n\treturn items.map(item => {\n\t\tlet { name, value, ...options } = item;\n\t\tvalue = value || [require.resolve(name), options];\n\t\treturn createConfigItem(value, { type });\n\t});\n};\n\nconst presetEnvRegex = RegExp(/@babel\\/(preset-)?env/);\n\nexport default () => {\n\treturn babelPlugin.custom(babelCore => {\n\t\treturn {\n\t\t\t// Passed the plugin options.\n\t\t\toptions({ custom: customOptions, ...pluginOptions }) {\n\t\t\t\treturn {\n\t\t\t\t\t// Pull out any custom options that the plugin might have.\n\t\t\t\t\tcustomOptions,\n\n\t\t\t\t\t// Pass the options back with the two custom options removed.\n\t\t\t\t\tpluginOptions,\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tconfig(config, { customOptions }) {\n\t\t\t\tconst targets = customOptions.targets;\n\t\t\t\tconst isNodeTarget = targets && targets.node != null;\n\n\t\t\t\tconst defaultPlugins = createConfigItems(\n\t\t\t\t\t'plugin',\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: '@babel/plugin-transform-react-jsx',\n\t\t\t\t\t\t\tpragma: customOptions.pragma || 'h',\n\t\t\t\t\t\t\tpragmaFrag: customOptions.pragmaFrag || 'Fragment',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t!customOptions.typescript && {\n\t\t\t\t\t\t\tname: '@babel/plugin-transform-flow-strip-types',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tisTruthy(customOptions.defines) && {\n\t\t\t\t\t\t\tname: 'babel-plugin-transform-replace-expressions',\n\t\t\t\t\t\t\treplace: customOptions.defines,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t!customOptions.modern && {\n\t\t\t\t\t\t\tname: 'babel-plugin-transform-async-to-promises',\n\t\t\t\t\t\t\tinlineHelpers: true,\n\t\t\t\t\t\t\texternalHelpers: false,\n\t\t\t\t\t\t\tminify: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t!customOptions.modern &&\n\t\t\t\t\t\t\t!isNodeTarget && {\n\t\t\t\t\t\t\t\tvalue: [\n\t\t\t\t\t\t\t\t\ttransformFastRest,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t// Use inline [].slice.call(arguments)\n\t\t\t\t\t\t\t\t\t\thelper: false,\n\t\t\t\t\t\t\t\t\t\tliteral: true,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t'transform-fast-rest',\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: '@babel/plugin-proposal-class-properties',\n\t\t\t\t\t\t\tloose: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t!customOptions.modern && {\n\t\t\t\t\t\t\tname: '@babel/plugin-transform-regenerator',\n\t\t\t\t\t\t\tasync: false,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'babel-plugin-macros',\n\t\t\t\t\t\t},\n\t\t\t\t\t].filter(Boolean),\n\t\t\t\t);\n\n\t\t\t\tconst babelOptions = config.options || {};\n\n\t\t\t\tconst envIdx = (babelOptions.presets || []).findIndex(preset =>\n\t\t\t\t\tpresetEnvRegex.test(preset.file.request),\n\t\t\t\t);\n\n\t\t\t\tconst environmentPreset = customOptions.modern\n\t\t\t\t\t? '@babel/preset-modules'\n\t\t\t\t\t: '@babel/preset-env';\n\n\t\t\t\tif (envIdx !== -1) {\n\t\t\t\t\tconst preset = babelOptions.presets[envIdx];\n\t\t\t\t\tbabelOptions.presets[envIdx] = createConfigItem(\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tenvironmentPreset,\n\t\t\t\t\t\t\tObject.assign(\n\t\t\t\t\t\t\t\tmerge(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tloose: true,\n\t\t\t\t\t\t\t\t\t\tuseBuiltIns: false,\n\t\t\t\t\t\t\t\t\t\ttargets: customOptions.targets,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tpreset.options,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tmodules: false,\n\t\t\t\t\t\t\t\t\t\texclude: merge(\n\t\t\t\t\t\t\t\t\t\t\t['transform-async-to-generator', 'transform-regenerator'],\n\t\t\t\t\t\t\t\t\t\t\t(preset.options && preset.options.exclude) || [],\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tcustomOptions.modern ? { targets: ESMODULES_TARGET } : {},\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t],\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: `preset`,\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tbabelOptions.presets = createConfigItems('preset', [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: environmentPreset,\n\t\t\t\t\t\t\ttargets: customOptions.modern\n\t\t\t\t\t\t\t\t? ESMODULES_TARGET\n\t\t\t\t\t\t\t\t: customOptions.targets,\n\t\t\t\t\t\t\tmodules: false,\n\t\t\t\t\t\t\tloose: true,\n\t\t\t\t\t\t\tuseBuiltIns: false,\n\t\t\t\t\t\t\texclude: [\n\t\t\t\t\t\t\t\t'transform-async-to-generator',\n\t\t\t\t\t\t\t\t'transform-regenerator',\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t]);\n\t\t\t\t}\n\n\t\t\t\t// Merge babelrc & our plugins together\n\t\t\t\tbabelOptions.plugins = mergeConfigItems(\n\t\t\t\t\t'plugin',\n\t\t\t\t\tdefaultPlugins,\n\t\t\t\t\tbabelOptions.plugins || [],\n\t\t\t\t);\n\n\t\t\t\tbabelOptions.generatorOpts = {\n\t\t\t\t\tminified: customOptions.compress,\n\t\t\t\t\tcompact: customOptions.compress,\n\t\t\t\t\tshouldPrintComment: comment => /[@#]__PURE__/.test(comment),\n\t\t\t\t};\n\n\t\t\t\treturn babelOptions;\n\t\t\t},\n\t\t};\n\t});\n};\n","import { red, dim } from 'kleur';\nimport { stderr } from './utils';\n\nexport default function(err) {\n\tconst error = err.error || err;\n\tconst description = `${error.name ? error.name + ': ' : ''}${error.message ||\n\t\terror}`;\n\tconst message = error.plugin\n\t\t? `(${error.plugin} plugin) ${description}`\n\t\t: description;\n\n\tstderr(red().bold(message));\n\n\tif (error.loc) {\n\t\tstderr();\n\t\tstderr(`at ${error.loc.file}:${error.loc.line}:${error.loc.column}`);\n\t}\n\n\tif (error.frame) {\n\t\tstderr();\n\t\tstderr(dim(error.frame));\n\t} else if (err.stack) {\n\t\tconst headlessStack = error.stack.replace(message, '');\n\t\tstderr(dim(headlessStack));\n\t}\n\n\tstderr();\n}\n","import fs from 'fs';\nimport { resolve, relative, dirname, basename, extname } from 'path';\nimport { green, red, yellow, white, blue } from 'kleur';\nimport { map, series } from 'asyncro';\nimport glob from 'tiny-glob/sync';\nimport autoprefixer from 'autoprefixer';\nimport cssnano from 'cssnano';\nimport { rollup, watch } from 'rollup';\nimport commonjs from '@rollup/plugin-commonjs';\nimport babel from 'rollup-plugin-babel';\nimport customBabel from './lib/babel-custom';\nimport nodeResolve from '@rollup/plugin-node-resolve';\nimport { terser } from 'rollup-plugin-terser';\nimport alias from '@rollup/plugin-alias';\nimport postcss from 'rollup-plugin-postcss';\nimport gzipSize from 'gzip-size';\nimport brotliSize from 'brotli-size';\nimport prettyBytes from 'pretty-bytes';\nimport typescript from 'rollup-plugin-typescript2';\nimport json from '@rollup/plugin-json';\nimport logError from './log-error';\nimport { readFile, isDir, isFile, stdout, stderr, isTruthy } from './utils';\nimport camelCase from 'camelcase';\n\nconst removeScope = name => name.replace(/^@.*\\//, '');\n\n// Convert booleans and int define= values to literals.\n// This is more intuitive than `microbundle --define A=1` producing A=\"1\".\nconst toReplacementExpression = (value, name) => {\n\t// --define A=\"1\",B='true' produces string:\n\tconst matches = value.match(/^(['\"])(.+)\\1$/);\n\tif (matches) {\n\t\treturn [JSON.stringify(matches[2]), name];\n\t}\n\n\t// --define @assign=Object.assign replaces expressions with expressions:\n\tif (name[0] === '@') {\n\t\treturn [value, name.substring(1)];\n\t}\n\n\t// --define A=1,B=true produces int/boolean literal:\n\tif (/^(true|false|\\d+)$/i.test(value)) {\n\t\treturn [value, name];\n\t}\n\n\t// default: string literal\n\treturn [JSON.stringify(value), name];\n};\n\n// Normalize Terser options from microbundle's relaxed JSON format (mutates argument in-place)\nfunction normalizeMinifyOptions(minifyOptions) {\n\tconst mangle = minifyOptions.mangle || (minifyOptions.mangle = {});\n\tlet properties = mangle.properties;\n\n\t// allow top-level \"properties\" key to override mangle.properties (including {properties:false}):\n\tif (minifyOptions.properties != null) {\n\t\tproperties = mangle.properties =\n\t\t\tminifyOptions.properties &&\n\t\t\tObject.assign(properties, minifyOptions.properties);\n\t}\n\n\t// allow previous format ({ mangle:{regex:'^_',reserved:[]} }):\n\tif (minifyOptions.regex || minifyOptions.reserved) {\n\t\tif (!properties) properties = mangle.properties = {};\n\t\tproperties.regex = properties.regex || minifyOptions.regex;\n\t\tproperties.reserved = properties.reserved || minifyOptions.reserved;\n\t}\n\n\tif (properties) {\n\t\tif (properties.regex) properties.regex = new RegExp(properties.regex);\n\t\tproperties.reserved = [].concat(properties.reserved || []);\n\t}\n}\n\n// Parses values of the form \"$=jQuery,React=react\" into key-value object pairs.\nconst parseMappingArgument = (globalStrings, processValue) => {\n\tconst globals = {};\n\tglobalStrings.split(',').forEach(globalString => {\n\t\tlet [key, value] = globalString.split('=');\n\t\tif (processValue) {\n\t\t\tconst r = processValue(value, key);\n\t\t\tif (r !== undefined) {\n\t\t\t\tif (Array.isArray(r)) {\n\t\t\t\t\t[value, key] = r;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = r;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tglobals[key] = value;\n\t});\n\treturn globals;\n};\n\n// Parses values of the form \"$=jQuery,React=react\" into key-value object pairs.\nconst parseMappingArgumentAlias = aliasStrings => {\n\treturn aliasStrings.split(',').map(str => {\n\t\tlet [key, value] = str.split('=');\n\t\treturn { find: key, replacement: value };\n\t});\n};\n\n// Extensions to use when resolving modules\nconst EXTENSIONS = ['.ts', '.tsx', '.js', '.jsx', '.es6', '.es', '.mjs'];\n\nconst WATCH_OPTS = {\n\texclude: 'node_modules/**',\n};\n\n// Hoist function because something (rollup?) incorrectly removes it\nfunction formatSize(size, filename, type, raw) {\n\tconst pretty = raw ? `${size} B` : prettyBytes(size);\n\tconst color = size < 5000 ? green : size > 40000 ? red : yellow;\n\tconst MAGIC_INDENTATION = type === 'br' ? 13 : 10;\n\treturn `${' '.repeat(MAGIC_INDENTATION - pretty.length)}${color(\n\t\tpretty,\n\t)}: ${white(basename(filename))}.${type}`;\n}\n\nasync function getSizeInfo(code, filename, raw) {\n\tconst gzip = formatSize(\n\t\tawait gzipSize(code),\n\t\tfilename,\n\t\t'gz',\n\t\traw || code.length < 5000,\n\t);\n\tlet brotli;\n\t//wrap brotliSize in try/catch in case brotli is unavailable due to\n\t//lower node version\n\ttry {\n\t\tbrotli = formatSize(\n\t\t\tawait brotliSize(code),\n\t\t\tfilename,\n\t\t\t'br',\n\t\t\traw || code.length < 5000,\n\t\t);\n\t} catch (e) {\n\t\treturn gzip;\n\t}\n\treturn gzip + '\\n' + brotli;\n}\n\nexport default async function microbundle(inputOptions) {\n\tlet options = { ...inputOptions };\n\n\toptions.cwd = resolve(process.cwd(), inputOptions.cwd);\n\tconst cwd = options.cwd;\n\n\tconst { hasPackageJson, pkg } = await getConfigFromPkgJson(cwd);\n\toptions.pkg = pkg;\n\n\tconst { finalName, pkgName } = getName({\n\t\tname: options.name,\n\t\tpkgName: options.pkg.name,\n\t\tamdName: options.pkg.amdName,\n\t\thasPackageJson,\n\t\tcwd,\n\t});\n\n\toptions.name = finalName;\n\toptions.pkg.name = pkgName;\n\n\tif (options.sourcemap !== false) {\n\t\toptions.sourcemap = true;\n\t}\n\n\toptions.input = await getInput({\n\t\tentries: options.entries,\n\t\tcwd,\n\t\tsource: options.pkg.source,\n\t\tmodule: options.pkg.module,\n\t});\n\n\toptions.output = await getOutput({\n\t\tcwd,\n\t\toutput: options.output,\n\t\tpkgMain: options.pkg.main,\n\t\tpkgName: options.pkg.name,\n\t});\n\n\toptions.entries = await getEntries({\n\t\tcwd,\n\t\tinput: options.input,\n\t});\n\n\toptions.multipleEntries = options.entries.length > 1;\n\n\t// to disable compress you can put in false or 0 but it's a string so our boolean checks won't work\n\toptions.compress =\n\t\ttypeof options.compress !== 'boolean'\n\t\t\t? options.compress !== 'false' && options.compress !== '0'\n\t\t\t: options.compress;\n\n\tlet formats = (options.format || options.formats).split(',');\n\t// always compile cjs first if it's there:\n\tformats.sort((a, b) => (a === 'cjs' ? -1 : a > b ? 1 : 0));\n\n\tlet steps = [];\n\tfor (let i = 0; i < options.entries.length; i++) {\n\t\tfor (let j = 0; j < formats.length; j++) {\n\t\t\tsteps.push(\n\t\t\t\tcreateConfig(\n\t\t\t\t\toptions,\n\t\t\t\t\toptions.entries[i],\n\t\t\t\t\tformats[j],\n\t\t\t\t\ti === 0 && j === 0,\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\t}\n\n\tif (options.watch) {\n\t\tconst onBuild = options.onBuild;\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tstdout(\n\t\t\t\tblue(\n\t\t\t\t\t`Watching source, compiling to ${relative(\n\t\t\t\t\t\tcwd,\n\t\t\t\t\t\tdirname(options.output),\n\t\t\t\t\t)}:`,\n\t\t\t\t),\n\t\t\t);\n\t\t\tsteps.map(options => {\n\t\t\t\twatch(\n\t\t\t\t\tObject.assign(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\toutput: options.outputOptions,\n\t\t\t\t\t\t\twatch: WATCH_OPTS,\n\t\t\t\t\t\t},\n\t\t\t\t\t\toptions.inputOptions,\n\t\t\t\t\t),\n\t\t\t\t).on('event', e => {\n\t\t\t\t\tif (e.code === 'FATAL') {\n\t\t\t\t\t\treturn reject(e.error);\n\t\t\t\t\t} else if (e.code === 'ERROR') {\n\t\t\t\t\t\tlogError(e.error);\n\t\t\t\t\t}\n\t\t\t\t\tif (e.code === 'END') {\n\t\t\t\t\t\toptions._sizeInfo.then(text => {\n\t\t\t\t\t\t\tstdout(`Wrote ${text.trim()}`);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (typeof onBuild === 'function') {\n\t\t\t\t\t\t\tonBuild(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tlet cache;\n\tlet out = await series(\n\t\tsteps.map(config => async () => {\n\t\t\tconst { inputOptions, outputOptions } = config;\n\t\t\tif (inputOptions.cache !== false) {\n\t\t\t\tinputOptions.cache = cache;\n\t\t\t}\n\t\t\tlet bundle = await rollup(inputOptions);\n\t\t\tcache = bundle;\n\t\t\tawait bundle.write(outputOptions);\n\t\t\treturn await config._sizeInfo;\n\t\t}),\n\t);\n\n\treturn (\n\t\tblue(\n\t\t\t`Build \"${options.name}\" to ${relative(cwd, dirname(options.output)) ||\n\t\t\t\t'.'}:`,\n\t\t) +\n\t\t'\\n   ' +\n\t\tout.join('\\n   ')\n\t);\n}\n\nasync function getConfigFromPkgJson(cwd) {\n\ttry {\n\t\tconst pkgJSON = await readFile(resolve(cwd, 'package.json'), 'utf8');\n\t\tconst pkg = JSON.parse(pkgJSON);\n\n\t\treturn {\n\t\t\thasPackageJson: true,\n\t\t\tpkg,\n\t\t};\n\t} catch (err) {\n\t\tconst pkgName = basename(cwd);\n\n\t\tstderr(\n\t\t\t// `Warn ${yellow(`no package.json found. Assuming a pkg.name of \"${pkgName}\".`)}`\n\t\t\tyellow(\n\t\t\t\t`${yellow().inverse(\n\t\t\t\t\t'WARN',\n\t\t\t\t)} no package.json found. Assuming a pkg.name of \"${pkgName}\".`,\n\t\t\t),\n\t\t);\n\n\t\tlet msg = String(err.message || err);\n\t\tif (!msg.match(/ENOENT/)) stderr(`  ${red().dim(msg)}`);\n\n\t\treturn { hasPackageJson: false, pkg: { name: pkgName } };\n\t}\n}\n\nconst safeVariableName = name =>\n\tcamelCase(\n\t\tremoveScope(name)\n\t\t\t.toLowerCase()\n\t\t\t.replace(/((^[^a-zA-Z]+)|[^\\w.-])|([^a-zA-Z0-9]+$)/g, ''),\n\t);\n\nfunction getName({ name, pkgName, amdName, cwd, hasPackageJson }) {\n\tif (!pkgName) {\n\t\tpkgName = basename(cwd);\n\t\tif (hasPackageJson) {\n\t\t\tstderr(\n\t\t\t\tyellow(\n\t\t\t\t\t`${yellow().inverse(\n\t\t\t\t\t\t'WARN',\n\t\t\t\t\t)} missing package.json \"name\" field. Assuming \"${pkgName}\".`,\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\t}\n\n\treturn { finalName: name || amdName || safeVariableName(pkgName), pkgName };\n}\n\nasync function jsOrTs(cwd, filename) {\n\tconst extension = (await isFile(resolve(cwd, filename + '.ts')))\n\t\t? '.ts'\n\t\t: (await isFile(resolve(cwd, filename + '.tsx')))\n\t\t? '.tsx'\n\t\t: '.js';\n\n\treturn resolve(cwd, `${filename}${extension}`);\n}\n\nasync function getInput({ entries, cwd, source, module }) {\n\tconst input = [];\n\n\t[]\n\t\t.concat(\n\t\t\tentries && entries.length\n\t\t\t\t? entries\n\t\t\t\t: (source &&\n\t\t\t\t\t\t(Array.isArray(source) ? source : [source]).map(file =>\n\t\t\t\t\t\t\tresolve(cwd, file),\n\t\t\t\t\t\t)) ||\n\t\t\t\t\t\t((await isDir(resolve(cwd, 'src'))) &&\n\t\t\t\t\t\t\t(await jsOrTs(cwd, 'src/index'))) ||\n\t\t\t\t\t\t(await jsOrTs(cwd, 'index')) ||\n\t\t\t\t\t\tmodule,\n\t\t)\n\t\t.map(file => glob(file))\n\t\t.forEach(file => input.push(...file));\n\n\treturn input;\n}\n\nasync function getOutput({ cwd, output, pkgMain, pkgName }) {\n\tlet main = resolve(cwd, output || pkgMain || 'dist');\n\tif (!main.match(/\\.[a-z]+$/) || (await isDir(main))) {\n\t\tmain = resolve(main, `${removeScope(pkgName)}.js`);\n\t}\n\treturn main;\n}\n\nasync function getEntries({ input, cwd }) {\n\tlet entries = (\n\t\tawait map([].concat(input), async file => {\n\t\t\tfile = resolve(cwd, file);\n\t\t\tif (await isDir(file)) {\n\t\t\t\tfile = resolve(file, 'index.js');\n\t\t\t}\n\t\t\treturn file;\n\t\t})\n\t).filter((item, i, arr) => arr.indexOf(item) === i);\n\treturn entries;\n}\n\n// shebang cache map because the transform only gets run once\nconst shebang = {};\n\nfunction createConfig(options, entry, format, writeMeta) {\n\tlet { pkg } = options;\n\n\tlet external = ['dns', 'fs', 'path', 'url'].concat(\n\t\toptions.entries.filter(e => e !== entry),\n\t);\n\n\tlet outputAliases = {};\n\t// since we transform src/index.js, we need to rename imports for it:\n\tif (options.multipleEntries) {\n\t\toutputAliases['.'] = './' + basename(options.output);\n\t}\n\n\tconst moduleAliases = options.alias\n\t\t? parseMappingArgumentAlias(options.alias)\n\t\t: [];\n\n\tconst peerDeps = Object.keys(pkg.peerDependencies || {});\n\tif (options.external === 'none') {\n\t\t// bundle everything (external=[])\n\t} else if (options.external) {\n\t\texternal = external.concat(peerDeps).concat(options.external.split(','));\n\t} else {\n\t\texternal = external\n\t\t\t.concat(peerDeps)\n\t\t\t.concat(Object.keys(pkg.dependencies || {}));\n\t}\n\n\tlet globals = external.reduce((globals, name) => {\n\t\t// valid JS identifiers are usually library globals:\n\t\tif (name.match(/^[a-z_$][a-z0-9_$]*$/)) {\n\t\t\tglobals[name] = name;\n\t\t}\n\t\treturn globals;\n\t}, {});\n\tif (options.globals && options.globals !== 'none') {\n\t\tglobals = Object.assign(globals, parseMappingArgument(options.globals));\n\t}\n\n\tlet defines = {};\n\tif (options.define) {\n\t\tdefines = Object.assign(\n\t\t\tdefines,\n\t\t\tparseMappingArgument(options.define, toReplacementExpression),\n\t\t);\n\t}\n\n\tfunction replaceName(filename, name) {\n\t\treturn resolve(\n\t\t\tdirname(filename),\n\t\t\tname + basename(filename).replace(/^[^.]+/, ''),\n\t\t);\n\t}\n\n\tlet mainNoExtension = options.output;\n\tif (options.multipleEntries) {\n\t\tlet name = entry.match(/([\\\\/])index(\\.(umd|cjs|es|m))?\\.(mjs|[tj]sx?)$/)\n\t\t\t? mainNoExtension\n\t\t\t: entry;\n\t\tmainNoExtension = resolve(dirname(mainNoExtension), basename(name));\n\t}\n\tmainNoExtension = mainNoExtension.replace(\n\t\t/(\\.(umd|cjs|es|m))?\\.(mjs|[tj]sx?)$/,\n\t\t'',\n\t);\n\n\tlet moduleMain = replaceName(\n\t\tpkg.module && !pkg.module.match(/src\\//)\n\t\t\t? pkg.module\n\t\t\t: pkg['jsnext:main'] || 'x.esm.js',\n\t\tmainNoExtension,\n\t);\n\tlet modernMain = replaceName(\n\t\t(pkg.syntax && pkg.syntax.esmodules) || pkg.esmodule || 'x.modern.js',\n\t\tmainNoExtension,\n\t);\n\tlet cjsMain = replaceName(pkg['cjs:main'] || 'x.js', mainNoExtension);\n\tlet umdMain = replaceName(pkg['umd:main'] || 'x.umd.js', mainNoExtension);\n\n\tconst modern = format === 'modern';\n\n\t// let rollupName = safeVariableName(basename(entry).replace(/\\.js$/, ''));\n\n\tlet nameCache = {};\n\tconst bareNameCache = nameCache;\n\t// Support \"minify\" field and legacy \"mangle\" field via package.json:\n\tconst rawMinifyValue = options.pkg.minify || options.pkg.mangle || {};\n\tlet minifyOptions = typeof rawMinifyValue === 'string' ? {} : rawMinifyValue;\n\tconst getNameCachePath =\n\t\ttypeof rawMinifyValue === 'string'\n\t\t\t? () => resolve(options.cwd, rawMinifyValue)\n\t\t\t: () => resolve(options.cwd, 'mangle.json');\n\n\tconst useTypescript = extname(entry) === '.ts' || extname(entry) === '.tsx';\n\n\tconst externalPredicate = new RegExp(`^(${external.join('|')})($|/)`);\n\tconst externalTest =\n\t\texternal.length === 0 ? id => false : id => externalPredicate.test(id);\n\n\tfunction loadNameCache() {\n\t\ttry {\n\t\t\tnameCache = JSON.parse(fs.readFileSync(getNameCachePath(), 'utf8'));\n\t\t\t// mangle.json can contain a \"minify\" field, same format as the pkg.mangle:\n\t\t\tif (nameCache.minify) {\n\t\t\t\tminifyOptions = Object.assign(\n\t\t\t\t\t{},\n\t\t\t\t\tminifyOptions || {},\n\t\t\t\t\tnameCache.minify,\n\t\t\t\t);\n\t\t\t}\n\t\t} catch (e) {}\n\t}\n\tloadNameCache();\n\n\tnormalizeMinifyOptions(minifyOptions);\n\n\tif (nameCache === bareNameCache) nameCache = null;\n\n\tlet config = {\n\t\tinputOptions: {\n\t\t\t// disable Rollup's cache for the modern build to prevent re-use of legacy transpiled modules:\n\t\t\tcache: modern ? false : undefined,\n\n\t\t\tinput: entry,\n\t\t\texternal: id => {\n\t\t\t\tif (id === 'babel-plugin-transform-async-to-promises/helpers') {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (options.multipleEntries && id === '.') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn externalTest(id);\n\t\t\t},\n\t\t\ttreeshake: {\n\t\t\t\tpropertyReadSideEffects: false,\n\t\t\t},\n\t\t\tplugins: []\n\t\t\t\t.concat(\n\t\t\t\t\tpostcss({\n\t\t\t\t\t\tplugins: [\n\t\t\t\t\t\t\tautoprefixer(),\n\t\t\t\t\t\t\toptions.compress !== false &&\n\t\t\t\t\t\t\t\tcssnano({\n\t\t\t\t\t\t\t\t\tpreset: 'default',\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t].filter(Boolean),\n\t\t\t\t\t\tautoModules: shouldCssModules(options),\n\t\t\t\t\t\tmodules: cssModulesConfig(options),\n\t\t\t\t\t\t// only write out CSS for the first bundle (avoids pointless extra files):\n\t\t\t\t\t\tinject: false,\n\t\t\t\t\t\textract: !!writeMeta,\n\t\t\t\t\t}),\n\t\t\t\t\tmoduleAliases.length > 0 &&\n\t\t\t\t\t\talias({\n\t\t\t\t\t\t\tresolve: EXTENSIONS,\n\t\t\t\t\t\t\tentries: moduleAliases,\n\t\t\t\t\t\t}),\n\t\t\t\t\tnodeResolve({\n\t\t\t\t\t\tmainFields: ['module', 'jsnext', 'main'],\n\t\t\t\t\t\tbrowser: options.target !== 'node',\n\t\t\t\t\t\t// defaults + .jsx\n\t\t\t\t\t\textensions: ['.mjs', '.js', '.jsx', '.json', '.node'],\n\t\t\t\t\t\tpreferBuiltins: options.target === 'node',\n\t\t\t\t\t}),\n\t\t\t\t\tcommonjs({\n\t\t\t\t\t\t// use a regex to make sure to include eventual hoisted packages\n\t\t\t\t\t\tinclude: /\\/node_modules\\//,\n\t\t\t\t\t}),\n\t\t\t\t\tjson(),\n\t\t\t\t\t{\n\t\t\t\t\t\t// We have to remove shebang so it doesn't end up in the middle of the code somewhere\n\t\t\t\t\t\ttransform: code => ({\n\t\t\t\t\t\t\tcode: code.replace(/^#![^\\n]*/, bang => {\n\t\t\t\t\t\t\t\tshebang[options.name] = bang;\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tmap: null,\n\t\t\t\t\t\t}),\n\t\t\t\t\t},\n\t\t\t\t\tuseTypescript &&\n\t\t\t\t\t\ttypescript({\n\t\t\t\t\t\t\ttypescript: require('typescript'),\n\t\t\t\t\t\t\tcacheRoot: `./node_modules/.cache/.rts2_cache_${format}`,\n\t\t\t\t\t\t\ttsconfigDefaults: {\n\t\t\t\t\t\t\t\tcompilerOptions: {\n\t\t\t\t\t\t\t\t\tsourceMap: options.sourcemap,\n\t\t\t\t\t\t\t\t\tdeclaration: true,\n\t\t\t\t\t\t\t\t\tjsx: 'react',\n\t\t\t\t\t\t\t\t\tjsxFactory: options.jsx || 'h',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttsconfig: options.tsconfig,\n\t\t\t\t\t\t\ttsconfigOverride: {\n\t\t\t\t\t\t\t\tcompilerOptions: {\n\t\t\t\t\t\t\t\t\ttarget: 'esnext',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}),\n\t\t\t\t\t// if defines is not set, we shouldn't run babel through node_modules\n\t\t\t\t\tisTruthy(defines) &&\n\t\t\t\t\t\tbabel({\n\t\t\t\t\t\t\tbabelrc: false,\n\t\t\t\t\t\t\tconfigFile: false,\n\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\tinclude: 'node_modules/**',\n\t\t\t\t\t\t\tplugins: [\n\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\trequire.resolve('babel-plugin-transform-replace-expressions'),\n\t\t\t\t\t\t\t\t\t{ replace: defines },\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}),\n\t\t\t\t\tcustomBabel()({\n\t\t\t\t\t\textensions: EXTENSIONS,\n\t\t\t\t\t\texclude: 'node_modules/**',\n\t\t\t\t\t\tpassPerPreset: true, // @see https://babeljs.io/docs/en/options#passperpreset\n\t\t\t\t\t\tcustom: {\n\t\t\t\t\t\t\tdefines,\n\t\t\t\t\t\t\tmodern,\n\t\t\t\t\t\t\tcompress: options.compress !== false,\n\t\t\t\t\t\t\ttargets: options.target === 'node' ? { node: '8' } : undefined,\n\t\t\t\t\t\t\tpragma: options.jsx || 'h',\n\t\t\t\t\t\t\tpragmaFrag: options.jsxFragment || 'Fragment',\n\t\t\t\t\t\t\ttypescript: !!useTypescript,\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t\toptions.compress !== false && [\n\t\t\t\t\t\tterser({\n\t\t\t\t\t\t\tsourcemap: true,\n\t\t\t\t\t\t\tcompress: Object.assign(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tkeep_infinity: true,\n\t\t\t\t\t\t\t\t\tpure_getters: true,\n\t\t\t\t\t\t\t\t\t// Ideally we'd just get Terser to respect existing Arrow functions...\n\t\t\t\t\t\t\t\t\t// unsafe_arrows: true,\n\t\t\t\t\t\t\t\t\tpasses: 10,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tminifyOptions.compress || {},\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\toutput: {\n\t\t\t\t\t\t\t\t// By default, Terser wraps function arguments in extra parens to trigger eager parsing.\n\t\t\t\t\t\t\t\t// Whether this is a good idea is way too specific to guess, so we optimize for size by default:\n\t\t\t\t\t\t\t\twrap_func_args: false,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\twarnings: true,\n\t\t\t\t\t\t\tecma: modern ? 9 : 5,\n\t\t\t\t\t\t\ttoplevel: modern || format === 'cjs' || format === 'es',\n\t\t\t\t\t\t\tmangle: Object.assign({}, minifyOptions.mangle || {}),\n\t\t\t\t\t\t\tnameCache,\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tnameCache && {\n\t\t\t\t\t\t\t// before hook\n\t\t\t\t\t\t\toptions: loadNameCache,\n\t\t\t\t\t\t\t// after hook\n\t\t\t\t\t\t\twriteBundle() {\n\t\t\t\t\t\t\t\tif (writeMeta && nameCache) {\n\t\t\t\t\t\t\t\t\tfs.writeFile(\n\t\t\t\t\t\t\t\t\t\tgetNameCachePath(),\n\t\t\t\t\t\t\t\t\t\tJSON.stringify(nameCache, null, 2),\n\t\t\t\t\t\t\t\t\t\t() => {},\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\t{\n\t\t\t\t\t\twriteBundle(bundle) {\n\t\t\t\t\t\t\tconfig._sizeInfo = Promise.all(\n\t\t\t\t\t\t\t\tObject.values(bundle).map(({ code, fileName }) => {\n\t\t\t\t\t\t\t\t\tif (code) {\n\t\t\t\t\t\t\t\t\t\treturn getSizeInfo(code, fileName, options.raw);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t).then(results => results.filter(Boolean).join('\\n'));\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t)\n\t\t\t\t.filter(Boolean),\n\t\t},\n\n\t\toutputOptions: {\n\t\t\tpaths: outputAliases,\n\t\t\tglobals,\n\t\t\tstrict: options.strict === true,\n\t\t\tlegacy: true,\n\t\t\tfreeze: false,\n\t\t\tesModule: false,\n\t\t\tsourcemap: options.sourcemap,\n\t\t\tget banner() {\n\t\t\t\treturn shebang[options.name];\n\t\t\t},\n\t\t\tformat: modern ? 'es' : format,\n\t\t\tname: options.name,\n\t\t\tfile: resolve(\n\t\t\t\toptions.cwd,\n\t\t\t\t{\n\t\t\t\t\tmodern: modernMain,\n\t\t\t\t\tes: moduleMain,\n\t\t\t\t\tumd: umdMain,\n\t\t\t\t}[format] || cjsMain,\n\t\t\t),\n\t\t},\n\t};\n\n\treturn config;\n}\n\nfunction shouldCssModules(options) {\n\tconst passedInOption = processCssmodulesArgument(options);\n\n\t// We should module when my-file.module.css or my-file.css\n\tconst moduleAllCss = passedInOption === true;\n\n\t// We should module when my-file.module.css\n\tconst allowOnlySuffixModule = passedInOption === null;\n\n\treturn moduleAllCss || allowOnlySuffixModule;\n}\n\nfunction cssModulesConfig(options) {\n\tconst passedInOption = processCssmodulesArgument(options);\n\tconst isWatchMode = options.watch;\n\tconst hasPassedInScopeName = !(\n\t\ttypeof passedInOption === 'boolean' || passedInOption === null\n\t);\n\n\tif (shouldCssModules(options) || hasPassedInScopeName) {\n\t\tlet generateScopedName = isWatchMode\n\t\t\t? '_[name]__[local]__[hash:base64:5]'\n\t\t\t: '_[hash:base64:5]';\n\n\t\tif (hasPassedInScopeName) {\n\t\t\tgenerateScopedName = passedInOption; // would be the string from --css-modules \"_[hash]\".\n\t\t}\n\n\t\treturn { generateScopedName };\n\t}\n\n\treturn false;\n}\n\n/*\nThis is done becuase if you use the cli default property, you get a primiatve \"null\" or \"false\",\nbut when using the cli arguments, you always get back strings. This method aims at correcting those\nfor both realms. So that both realms _convert_ into primatives.\n*/\nfunction processCssmodulesArgument(options) {\n\tif (options['css-modules'] === 'true' || options['css-modules'] === true)\n\t\treturn true;\n\tif (options['css-modules'] === 'false' || options['css-modules'] === false)\n\t\treturn false;\n\tif (options['css-modules'] === 'null' || options['css-modules'] === null)\n\t\treturn null;\n\n\treturn options['css-modules'];\n}\n"],"names":["fastRestTransform","template","types","t","slice","VISITOR","RestElement","path","state","parentKey","get","scope","generateUidIdentifier","set","args","identifier","key","push","numericLiteral","sliced","callExpression","memberExpression","clone","ident","node","argument","binding","getBinding","name","referencePaths","length","func","parentPath","isArrowFunctionExpression","arrowFunctionToExpression","constant","replaceWith","decl","variableDeclaration","variableDeclarator","unshiftContainer","remove","visitor","Program","childState","Map","useHelper","opts","helper","inlineHelper","literal","expression","ast","traverse","IDENT","addComment","declarations","init","readFile","promisify","fs","stat","isDir","then","stats","isDirectory","catch","isFile","stdout","console","log","bind","stderr","error","isTruthy","obj","constructor","Object","keys","ESMODULES_TARGET","esmodules","mergeConfigItems","type","configItemsToMerge","mergedItems","forEach","configItemToMerge","item","itemToMergeWithIndex","findIndex","mergedItem","file","resolved","createConfigItem","merge","options","createConfigItems","items","map","value","require","resolve","presetEnvRegex","RegExp","babelPlugin","custom","babelCore","customOptions","pluginOptions","config","targets","isNodeTarget","defaultPlugins","pragma","pragmaFrag","typescript","defines","replace","modern","inlineHelpers","externalHelpers","minify","transformFastRest","loose","async","filter","Boolean","babelOptions","envIdx","presets","preset","test","request","environmentPreset","assign","useBuiltIns","modules","exclude","plugins","generatorOpts","minified","compress","compact","shouldPrintComment","comment","err","description","message","plugin","red","bold","loc","line","column","frame","dim","stack","headlessStack","_catch","body","recover","result","e","getEntries","input","cwd","concat","entries","i","arr","indexOf","getOutput","output","pkgMain","pkgName","main","removeScope","match","getInput","source","module","glob","jsOrTs","Array","isArray","filename","extension","getConfigFromPkgJson","pkgJSON","pkg","JSON","parse","hasPackageJson","basename","yellow","inverse","msg","String","microbundle","inputOptions","process","finalName","getName","amdName","sourcemap","multipleEntries","formats","format","split","sort","a","b","steps","j","createConfig","watch","onBuild","Promise","reject","blue","relative","dirname","outputOptions","WATCH_OPTS","on","code","logError","_sizeInfo","text","trim","cache","series","rollup","bundle","write","out","join","getSizeInfo","raw","gzipSize","gzip","brotli","formatSize","brotliSize","toReplacementExpression","matches","stringify","substring","normalizeMinifyOptions","minifyOptions","mangle","properties","regex","reserved","parseMappingArgument","globalStrings","processValue","globals","globalString","r","undefined","parseMappingArgumentAlias","aliasStrings","str","find","replacement","EXTENSIONS","size","pretty","prettyBytes","color","green","MAGIC_INDENTATION","repeat","white","safeVariableName","camelCase","toLowerCase","shebang","entry","writeMeta","external","outputAliases","moduleAliases","alias","peerDeps","peerDependencies","dependencies","reduce","define","replaceName","mainNoExtension","moduleMain","modernMain","syntax","esmodule","cjsMain","umdMain","nameCache","bareNameCache","rawMinifyValue","getNameCachePath","useTypescript","extname","externalPredicate","externalTest","id","loadNameCache","readFileSync","treeshake","propertyReadSideEffects","postcss","autoprefixer","cssnano","autoModules","shouldCssModules","cssModulesConfig","inject","extract","nodeResolve","mainFields","browser","target","extensions","preferBuiltins","commonjs","include","json","transform","bang","cacheRoot","tsconfigDefaults","compilerOptions","sourceMap","declaration","jsx","jsxFactory","tsconfig","tsconfigOverride","babel","babelrc","configFile","customBabel","passPerPreset","jsxFragment","terser","keep_infinity","pure_getters","passes","wrap_func_args","warnings","ecma","toplevel","writeBundle","writeFile","all","values","fileName","results","paths","strict","legacy","freeze","esModule","banner","es","umd","passedInOption","processCssmodulesArgument","moduleAllCss","allowOnlySuffixModule","isWatchMode","hasPassedInScopeName","generateScopedName"],"mappings":"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"}